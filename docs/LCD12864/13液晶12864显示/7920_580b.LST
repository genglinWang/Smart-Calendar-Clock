C51 COMPILER V9.59.0.0   7920_580B                                                         03/01/2022 16:05:00 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE 7920_580B
OBJECT MODULE PLACED IN 7920_580b.OBJ
COMPILER INVOKED BY: D:\keilv5\C51\BIN\C51.EXE 7920_580b.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /********************************************************************
   2          * 文件名  ： 定时器的使用.c
   3          * 描述    :  
   4          * 创建人  ： 东流，2009年4月8日
   5          * 版本号  ： 2.0
   6          ***********************************************************************/
   7          #include <reg52.h>
   8          #include <string.h>
   9          
  10          #define uchar unsigned char
  11          #define uint  unsigned int
  12          
  13          uchar code IC_DAT[];
  14          uchar code pic1[];
  15          uchar code pic2[];
  16          uchar code pic3[]; 
  17          
  18          sbit RS  = P2^5;
  19          sbit WRD = P2^6;
  20          sbit E   = P2^7;
  21          sbit PSB = P2^2;
  22          sbit RES = P2^4;
  23          
  24          void TransferData(char data1,bit DI);
  25          void display(void);
  26          void display_grapic(void);
  27          void delayms(uint n);
  28          void DisplayLine(uchar line1,uchar line2);
  29          void DisplayGraphic(uchar code *adder);
  30          void delay(uint m);
  31          void lcd_mesg(uchar code *adder1);
  32          
  33          uchar code IC_DAT[]={
  34          "     HOT-51     "  
  35          "                "
  36          "  单片机开发板  "
  37          "    东流电子    "
  38          };
  39          
  40          uchar code IC_DAT2[]={
  41          "  白日依山尽，  "      //0x80
  42          "  欲穷千里目，  "      //0x90
  43          "  黄河入海流。  "      //0x88
  44          "  更上一层楼。  "      //0x98
  45          };
  46          
  47          /********************************************************************
  48          * 名称 : Convert(uchar In_Date)
  49          * 功能 : 因为电路设计时，P0.0--P0.7接法刚好了资料中的相反，所以设计该函数。
  50          * 输入 : 1602资料上的值
  51          * 输出 : 送到1602的值
  52          ***********************************************************************/
  53          unsigned char Convert(unsigned char In_Date)
  54          {
  55   1          unsigned char i, Out_Date = 0, temp = 0;
C51 COMPILER V9.59.0.0   7920_580B                                                         03/01/2022 16:05:00 PAGE 2   

  56   1          for(i=0; i<8; i++)
  57   1          {
  58   2              temp = (In_Date >> i) & 0x01;
  59   2              Out_Date |= (temp << (7 - i));
  60   2          }
  61   1          return Out_Date;
  62   1      }
  63          
  64          void initinal(void)           //LCD字库初始化程序
  65          {
  66   1                 delay(40);             //大于40MS的延时程序
  67   1                 PSB=1;                 //设置为8BIT并口工作模式
  68   1                 delay(1);              //延时
  69   1                 RES=0;                 //复位
  70   1                 delay(1);              //延时
  71   1                 RES=1;                 //复位置高
  72   1                 delay(10);
  73   1                 TransferData(0x30,0);  //Extended Function Set :8BIT设置,RE=0: basic instruction set, G=0 :grap
             -hic display OFF
  74   1                 delay(100);            //大于100uS的延时程序
  75   1                 TransferData(0x30,0);  //Function Set
  76   1                 delay(37);             ////大于37uS的延时程序
  77   1                 TransferData(0x08,0);  //Display on Control
  78   1                 delay(100);            //大于100uS的延时程序
  79   1                 TransferData(0x10,0);  //Cursor Display Control光标设置
  80   1                 delay(100);            //大于100uS的延时程序
  81   1                 TransferData(0x0C,0);  //Display Control,D=1,显示开
  82   1                 delay(100);            //大于100uS的延时程序
  83   1                 TransferData(0x01,0);  //Display Clear
  84   1                 delay(10);             //大于10mS的延时程序
  85   1                 TransferData(0x06,0);  //Enry Mode Set,光标从右向左加1位移动
  86   1                 delay(100);            //大于100uS的延时程序
  87   1                }
  88          
  89          /********************************************************************
  90          * 名称 : Main()
  91          * 功能 : 主函数
  92          * 输入 : 无
  93          * 输出 : 无
  94          ***********************************************************************/
  95          void     initina2(void)           //LCD显示图片(扩展)初始化程序
  96                    {
  97   1                 delay(40);             //大于40MS的延时程序
  98   1                 PSB=1;                 //设置为8BIT并口工作模式
  99   1                 delay(1);              //延时
 100   1                 RES=0;                 //复位
 101   1                 delay(1);              //延时
 102   1                 RES=1;                 //复位置高
 103   1                 delay(10);
 104   1      
 105   1                 TransferData(0x36,0);  //Extended Function Set RE=1: extended instruction
 106   1                 delay(100);            //大于100uS的延时程序
 107   1                 TransferData(0x36,0);  //Extended Function Set:RE=1: extended instruction set
 108   1                 delay(37);             ////大于37uS的延时程序
 109   1                 TransferData(0x3E,0);  //EXFUNCTION(DL=8BITS,RE=1,G=1)
 110   1                 delay(100);            //大于100uS的延时程序
 111   1                 TransferData(0x01,0);  //CLEAR SCREEN
 112   1                 delay(100);            //大于100uS的延时程序
 113   1                }
 114          
 115          /********************************************************************
 116          * 名称 : Main()
C51 COMPILER V9.59.0.0   7920_580B                                                         03/01/2022 16:05:00 PAGE 3   

 117          * 功能 : 主函数
 118          * 输入 : 无
 119          * 输出 : 无
 120          ***********************************************************************/
 121          void    main(void)
 122               {
 123   1               while(1)
 124   1            {
 125   2            initina2();            //调用LCD显示图片(扩展)初始化程序
 126   2        
 127   2                DisplayGraphic(pic2);  //显示图片2
 128   2                delayms(200);       
 129   2      
 130   2                initinal();        //调用LCD字库初始化程序
 131   2                delay(100);            //大于100uS的延时程序
 132   2                lcd_mesg(IC_DAT);      //显示中文汉字1
 133   2                delayms(240);
 134   2                delayms(240);
 135   2          
 136   2                initinal();        //调用LCD字库初始化程序
 137   2                delay(100);            //大于100uS的延时程序 
 138   2                lcd_mesg(IC_DAT2);     //显示中文汉字2
 139   2                delayms(240);
 140   2            delayms(240);
 141   2            initinal();  
 142   2              }
 143   1            }
 144          
 145          /********************************************************************
 146          * 名称 : Main()
 147          * 功能 : 主函数
 148          * 输入 : 无
 149          * 输出 : 无
 150          ***********************************************************************/
 151          void   lcd_mesg(unsigned char code *adder1)
 152          {
 153   1        unsigned char i;
 154   1              TransferData(0x80,0);  //Set Graphic Display RAM Address
 155   1              delay(100);
 156   1        for(i=0;i<32;i++)
 157   1          {
 158   2              TransferData(*adder1,1);
 159   2              adder1++;
 160   2          }
 161   1      
 162   1              TransferData(0x90,0);  //Set Graphic Display RAM Address
 163   1              delay(100);
 164   1        for(i=32;i<64;i++)
 165   1          {
 166   2              TransferData(*adder1,1);
 167   2              adder1++;
 168   2          }
 169   1      }
 170          
 171          /********************************************************************
 172          * 名称 : Main()
 173          * 功能 : 主函数
 174          * 输入 : 无
 175          * 输出 : 无
 176          ***********************************************************************/
 177          void    TransferData(char data1,bit DI)  //传送数据或者命令,当DI=0是,传送命令,当DI=1,传送数据.
 178                    {
C51 COMPILER V9.59.0.0   7920_580B                                                         03/01/2022 16:05:00 PAGE 4   

 179   1                  WRD=0;
 180   1                  RS=DI;
 181   1                  delay(1);
 182   1                  P0=Convert(data1);
 183   1                  E=1;
 184   1                  delay(1);
 185   1                  E=0;
 186   1                 }
 187          
 188          /********************************************************************
 189          * 名称 : Main()
 190          * 功能 : 主函数
 191          * 输入 : 无
 192          * 输出 : 无
 193          ***********************************************************************/
 194          void    delayms(unsigned int n)            //延时10×n毫秒程序
 195                             {
 196   1                            unsigned int i,j;
 197   1                            for(i=0;i<n;i++)
 198   1                               for(j=0;j<2000;j++);
 199   1                         }
 200          
 201          /********************************************************************
 202          * 名称 : Main()
 203          * 功能 : 主函数
 204          * 输入 : 无
 205          * 输出 : 无
 206          ***********************************************************************/
 207          void    delay(unsigned int m)            //延时程序
 208                             {
 209   1                            unsigned int i,j;
 210   1                            for(i=0;i<m;i++)
 211   1                               for(j=0;j<10;j++);
 212   1                         }
 213          
 214          /********************************************************************
 215          * 名称 : Main()
 216          * 功能 : 主函数
 217          * 输入 : 无
 218          * 输出 : 无
 219          ***********************************************************************/
 220          void DisplayGraphic(unsigned char code *adder)
 221          {
 222   1      
 223   1         int i,j;
 224   1      //*******显示上半屏内容设置
 225   1         for(i=0;i<32;i++)              //
 226   1          { 
 227   2            TransferData((0x80 + i),0); //SET  垂直地址 VERTICAL ADD
 228   2            TransferData(0x80,0);       //SET  水平地址 HORIZONTAL ADD
 229   2            for(j=0;j<16;j++)
 230   2             {
 231   3               TransferData(*adder,1);
 232   3               adder++;
 233   3             }
 234   2          }    
 235   1      //*******显示下半屏内容设置
 236   1         for(i=0;i<32;i++)              //
 237   1          {
 238   2            TransferData((0x80 + i),0); //SET 垂直地址 VERTICAL ADD
 239   2            TransferData(0x88,0);       //SET 水平地址 HORIZONTAL ADD
 240   2            for(j=0;j<16;j++)
C51 COMPILER V9.59.0.0   7920_580B                                                         03/01/2022 16:05:00 PAGE 5   

 241   2             {
 242   3               TransferData(*adder,1);
 243   3               adder++;
 244   3             }
 245   2          }
 246   1      }
 247          
 248          
 249          
 250          unsigned char code pic2[]=
 251          {
 252          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 253          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 254          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x07,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
 255          0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xC0,0x01,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
 256          0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x78,0x00,0x00,0x00,0x00,0x00,0x00,
 257          0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x00,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,
 258          0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x07,0x80,0x00,0x00,0x00,0x00,0x00,
 259          0x00,0x00,0x00,0x00,0x00,0x03,0xC0,0x00,0x00,0x01,0xC0,0x00,0x00,0x00,0x00,0x00,
 260          0x00,0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x00,
 261          0x00,0x00,0x00,0x00,0x00,0x3C,0x00,0x00,0x00,0x00,0x1C,0x00,0x00,0x00,0x00,0x00,
 262          0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x1E,0x00,0x00,0x00,0x00,0x00,
 263          0x00,0x00,0x00,0x00,0x03,0xC0,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00,0x00,
 264          0x00,0x00,0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x01,0xE6,0x00,0x00,0x00,0x00,0x00,
 265          0x00,0x00,0x00,0x00,0x3C,0x00,0x00,0x00,0x00,0x07,0x82,0x00,0x00,0x00,0x00,0x00,
 266          0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x1E,0x02,0x00,0x00,0x00,0x00,0x00,
 267          0x00,0x00,0x00,0x01,0xE0,0x00,0x00,0x00,0x00,0x78,0x03,0x00,0x00,0x00,0x00,0x00,
 268          0x00,0x00,0x00,0x01,0xE0,0x00,0x00,0x00,0x01,0xE0,0x03,0x00,0x00,0x00,0x00,0x00,
 269          0x00,0x00,0x00,0x01,0x78,0x00,0x00,0x00,0x07,0x80,0x01,0x00,0x00,0x00,0x00,0x00,
 270          0x00,0x00,0x00,0x03,0x1E,0x00,0x00,0x00,0x1E,0x00,0x07,0x00,0x00,0x00,0x00,0x00,
 271          0x00,0x00,0x00,0x03,0x07,0x80,0x00,0x00,0x78,0x00,0x1F,0x00,0x00,0x00,0x00,0x00,
 272          0x00,0x00,0x00,0x02,0x01,0xE0,0x00,0x01,0xE0,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,
 273          0x00,0x00,0x00,0x06,0x00,0x78,0x1F,0x07,0x80,0x01,0xF1,0x80,0x00,0x00,0x00,0x00,
 274          0x00,0x00,0x00,0x0E,0x00,0x1E,0x3F,0x9E,0x00,0x03,0xF9,0x80,0x00,0x00,0x00,0x00,
 275          0x00,0x00,0x00,0x0E,0x00,0x07,0xB3,0x78,0x00,0x0F,0xF9,0x80,0x00,0x00,0x00,0x00,
 276          0x00,0x00,0x00,0x0F,0x80,0x01,0xFF,0xE0,0x00,0x79,0x98,0x80,0x00,0x00,0x00,0x00,
 277          0x00,0x00,0x00,0x0F,0xE0,0x00,0x7F,0x80,0x00,0xE0,0xD8,0x80,0x00,0x00,0x00,0x00,
 278          0x00,0x00,0x00,0x0F,0xF8,0x00,0x0C,0x00,0x07,0xE0,0xF8,0x80,0x00,0x00,0x00,0x00,
 279          0x00,0x00,0x00,0x0E,0x7E,0x00,0x0C,0x00,0x1F,0xF0,0xF8,0x80,0x00,0x00,0x00,0x00,
 280          0x00,0x00,0x00,0x0E,0x1F,0x80,0x0C,0x00,0x7E,0x70,0xDC,0x80,0x00,0x00,0x00,0x00,
 281          0x00,0x00,0x00,0x0F,0x07,0xE0,0x0C,0x01,0xE3,0x70,0x5C,0xC0,0x00,0x00,0x00,0x00,
 282          0x00,0x00,0x00,0x0F,0x81,0xF8,0x0C,0x07,0x83,0x70,0x5F,0xC0,0x00,0x00,0x00,0x00,
 283          0x00,0x00,0x00,0x0D,0xE0,0x7E,0x0C,0x1F,0xC1,0xF0,0x5F,0xC0,0x00,0x00,0x00,0x00,
 284          0x00,0x00,0x00,0x0F,0x78,0x3F,0x8C,0x7F,0xC1,0xB8,0x47,0xC0,0x00,0x00,0x00,0x00,
 285          0x00,0x00,0x00,0x0F,0x1E,0x0F,0xED,0xEC,0xE1,0xB8,0xC7,0xC0,0x00,0x00,0x00,0x00,
 286          0x00,0x00,0x00,0x1F,0x07,0x83,0xFF,0xC6,0xE1,0xB9,0xC7,0xC0,0x00,0x00,0x00,0x00,
 287          0x00,0x00,0x00,0x1F,0x07,0xE0,0xFF,0xE7,0xE1,0xBF,0x07,0xC0,0x00,0x00,0x00,0x00,
 288          0x00,0x00,0x00,0x1F,0x07,0xF8,0x3F,0xE7,0xE1,0xBF,0x07,0xC0,0x00,0x00,0x00,0x00,
 289          0x00,0x00,0x00,0x1F,0x07,0x9E,0x0C,0xE6,0xE1,0x8F,0x07,0xC0,0x00,0x00,0x00,0x00,
 290          0x00,0x00,0x00,0x1F,0x07,0x87,0x8C,0xE6,0xE3,0x8F,0x83,0xC0,0x00,0x00,0x00,0x00,
 291          0x00,0x00,0x00,0x1F,0x0F,0x81,0xED,0xE6,0xE7,0x0F,0x83,0xC0,0x00,0x00,0x00,0x00,
 292          0x00,0x00,0x00,0x1F,0x07,0x00,0x7F,0xE6,0xFE,0x0F,0x83,0x40,0x00,0x00,0x00,0x00,
 293          0x00,0x00,0x00,0x1F,0x00,0x00,0x1E,0x76,0xFE,0x0F,0x83,0x40,0x00,0x00,0x00,0x00,
 294          0x00,0x00,0x00,0x1E,0x00,0x00,0x00,0x72,0x1E,0x0F,0x83,0x40,0x00,0x00,0x00,0x00,
 295          0x00,0x00,0x00,0x1E,0x00,0x00,0x00,0x7E,0x1A,0x0F,0x83,0x40,0x00,0x00,0x00,0x00,
 296          0x00,0x00,0x00,0x1E,0x00,0x00,0x00,0x7C,0x1A,0x0F,0x83,0xC0,0x00,0x00,0x00,0x00,
 297          0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x78,0x1A,0x0F,0x83,0xC0,0x00,0x00,0x00,0x00,
 298          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x1A,0x07,0x83,0xC0,0x00,0x00,0x00,0x00,
 299          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1E,0x07,0x80,0x00,0x00,0x00,0x00,0x00,
 300          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1F,0x07,0x80,0x00,0x00,0x00,0x00,0x00,
 301          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1F,0x07,0x80,0x00,0x00,0x00,0x00,0x00,
 302          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1F,0x07,0x80,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.59.0.0   7920_580B                                                         03/01/2022 16:05:00 PAGE 6   

 303          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1F,0x07,0x00,0x00,0x00,0x00,0x00,0x00,
 304          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1F,0x00,0x00,0x00,0x00,0x08,0x00,0x00,
 305          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x1F,0x00,0x00,0x00,0x00,0x10,0x00,0x40,
 306          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x1F,0x00,0x00,0x00,0x00,0xFF,0x08,0x20,
 307          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x1F,0x00,0x00,0x00,0x00,0x28,0x05,0xFC,
 308          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x34,0x0C,0x00,0x00,0x00,0x00,0x48,0x00,0x40,
 309          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x34,0x00,0x00,0x00,0x00,0x00,0xFF,0x08,0x88,
 310          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x34,0x00,0x00,0x00,0x00,0x00,0x08,0x05,0xFC,
 311          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x00,0x00,0x00,0x00,0x00,0x4A,0x00,0xA8,
 312          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x00,0x00,0x00,0x00,0x00,0x89,0x04,0xA8,
 313          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x01,0x08,0x88,0xA8,
 314          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x10,0xAA,
 315          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x01,0x2E,
 316          
 317          };


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    676    ----
   CONSTANT SIZE    =   1154    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
